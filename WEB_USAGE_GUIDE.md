# Web界面使用指南

## 🌐 Enhanced ReAct Agent Web对话界面

### 启动方式

1. **安装依赖**
```bash
pip install Flask Flask-CORS
```

2. **启动Web应用**
```bash
python web_app.py
```

3. **访问界面**
打开浏览器访问: http://localhost:5000

### 界面特点

- **简洁设计**: 纯对话界面，所有功能通过对话交互
- **现代UI**: 渐变背景，圆角设计，响应式布局
- **实时交互**: 支持实时对话和状态反馈
- **智能提示**: 内置使用说明和工具介绍

### 核心功能

#### 1. 文档上传
**方式一：智能文件上传**
- 点击输入框右侧的📎按钮
- 选择文档文件（支持.txt, .pdf, .docx, .doc, .md格式）
- 系统智能判断文件类型并自动处理：
  - 📄 **资料文档**：包含"会议"、"资料"、"报告"等关键词 → 自动调用RAG工具
  - 📋 **模板文件**：包含"模板"、"template"、"样本"等关键词 → 自动调用模板处理工具
  - ❓ **未知文件**：文件名不明确 → 询问用户意图并提供选项

**方式二：对话上传**
```
用户输入: "请上传test/会议纪要.docx到RAG系统"
系统响应: 自动调用RAG工具进行文档处理
```

#### 2. 模板处理  
```
用户输入: "请处理模板文件template.docx"
系统响应: 提取模板字段并生成JSON
```

#### 3. 智能填充
```
用户输入: "基于上传的资料填充模板字段"
系统响应: 智能匹配内容并填充字段
```

#### 4. 文档生成
```
用户输入: "生成最终文档"
系统响应: 输出完整的docx文档
```

### 对话示例

#### 完整工作流程
```
👤 用户: 你好，我需要生成一份项目报告

🤖 助手: 您好！我可以帮您生成项目报告。请按以下步骤操作：
1. 先上传您的项目资料文档
2. 提供项目报告模板
3. 我会智能填充并生成最终报告

👤 用户: [点击📎按钮上传文件 project_meeting.docx]

🤖 助手: 📄 资料文档 project_meeting.docx 上传成功并已处理
✅ 系统智能识别为资料文档，已调用RAG工具进行embedding处理
文档已进行embedding处理，可用于智能搜索和内容填充。

👤 用户: [点击📎按钮上传文件 report_template.docx]

🤖 助手: 📋 模板文件 report_template.docx 上传成功并已处理
✅ 系统智能识别为模板文件，已调用模板处理工具提取字段

👤 用户: [点击📎按钮上传文件 document.docx]

🤖 助手: ❓ 文件 document.docx 上传成功！请告诉我这是资料文档还是模板文件？

请选择以下操作：
1. 这是资料文档，请上传uploads/document.docx到RAG系统
2. 这是模板文件，请处理模板文件uploads/document.docx

👤 用户: 请处理模板文件templates_storage/report_template.docx

🤖 助手: 正在处理模板文件...
✅ 成功提取模板字段：
- 项目名称
- 项目负责人  
- 项目进度
- 关键成果
...

👤 用户: 基于上传的资料填充这些字段

🤖 助手: 正在智能填充字段...
✅ 字段填充完成！生成的文档已保存到 generated_documents/ 目录
```

### 界面元素说明

#### 1. 头部区域
- **标题**: Enhanced ReAct Agent
- **副标题**: 智能文档处理助手 - 核心三工具架构
- **状态指示器**: 显示系统就绪状态

#### 2. 消息区域
- **欢迎信息**: 介绍系统功能和使用方法
- **工具说明**: 核心三工具架构简介
- **对话历史**: 用户和助手的对话记录

#### 3. 输入区域
- **文本输入框**: 支持多行输入
- **文件上传按钮**: 📎按钮，支持直接上传文档
- **发送按钮**: 点击或按Enter发送消息
- **加载状态**: 处理中的视觉反馈

### 快捷操作

#### 常用命令
- `列出所有可用工具` - 查看系统工具
- `清空RAG存储` - 清理向量数据库
- `查看生成的文档` - 列出已生成文档
- `系统状态` - 检查系统运行状态

#### 文件路径示例
- 直接上传: 通过📎按钮上传，自动保存到`uploads/`目录
- 对话上传: `test/会议纪要.docx`
- 模板: `templates_storage/template.docx`
- 输出: `generated_documents/output.docx`

### 技术特性

#### 前端技术
- **纯HTML/CSS/JavaScript**: 无需额外框架
- **响应式设计**: 支持移动端和桌面端
- **实时通信**: 基于Fetch API的异步交互

#### 后端技术
- **Flask**: 轻量级Web框架
- **Flask-CORS**: 跨域资源共享
- **Session管理**: 对话历史保存

#### 安全特性
- **输入验证**: 防止恶意输入
- **错误处理**: 友好的错误提示
- **资源限制**: 防止资源滥用

### 故障排除

#### 常见问题

1. **无法访问界面**
   - 检查端口5000是否被占用
   - 确认防火墙设置
   - 验证Flask是否正确安装

2. **Agent初始化失败**
   - 检查.env文件中的API密钥
   - 确认网络连接正常
   - 验证依赖包是否完整安装

3. **文档处理错误**
   - 检查文件路径是否正确
   - 确认文件格式是否支持
   - 验证文件权限设置

#### 调试模式
启动时添加调试参数：
```bash
FLASK_DEBUG=1 python web_app.py
```

### 最佳实践

1. **文件组织**: 将资料文档放在test/目录，模板放在templates_storage/目录
2. **命名规范**: 使用有意义的文件名，避免特殊字符
3. **分步操作**: 按照工作流程逐步进行，确保每步成功
4. **定期清理**: 定期清理生成的文档和向量存储

### 扩展功能

#### 自定义配置
在web_app.py中可以修改：
- 端口号: `port=5000`
- 主机地址: `host='0.0.0.0'`
- 调试模式: `debug=True`

#### 样式定制
在templates/chat.html中可以自定义：
- 颜色主题
- 字体样式  
- 布局结构
- 动画效果

---

**让文档处理更简单，让交互更智能！** 🚀 