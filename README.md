# ReactAgent - 智能文档处理系统

一个基于ReAct框架的智能代理系统，专注于专业文档的智能处理和生成。

## 🌟 **核心功能**

### 📚 **RAG文档处理**
- 支持多格式文档embedding（DOC/DOCX/PDF/TXT）
- 基于Chroma向量数据库的语义检索
- 智能文档相似度搜索和知识管理

### 🧠 **专业文档代理**
- RAG检索+AI智能合并协调器
- 智能文档类型识别和处理策略选择
- 专业建筑工程领域优化

### 📋 **模板合并系统**
- AI智能合并原始文档与模板JSON
- 保持模板格式的同时填充实际内容
- 智能字段匹配和内容提取

### 🔥 **长文档生成**
- 专业长篇文档智能生成器（3000-8000字）
- 多种专业领域模板支持
- AI驱动的章节结构规划

### 🎯 **专业文档工具（新增）**
- **完整的RAG+AI智能文档处理功能**
- 整合用户提供的专业工具代理和模板插入功能
- 支持三种智能处理模式：
  - `professional_agent`：RAG检索 + 智能选择模式（推荐）
  - `template_insertion`：保持Word结构的模板填充
  - `content_merge`：基于JSON模板生成新文档

## 🏗️ **系统架构**

### **核心三工具架构**
1. **📚 RAG工具** (`rag_tool`) - 文档embedding处理、智能搜索
2. **🔥 长文档生成工具** (`long_document_generator`) - 专业长篇文档智能生成器
3. **🎯 专业文档工具** (`professional_document_tool`) - 完整的RAG+AI智能文档处理功能

### **工具特色功能对比**

| 工具 | 主要功能 | 适用场景 | 特色能力 |
|------|----------|----------|----------|
| 📚 RAG工具 | 文档embedding和检索 | 知识库构建、语义搜索 | Chroma向量数据库、多格式支持 |
| 🔥 长文档生成器 | 长篇专业文档生成 | 技术报告、研究文档 | 多轮对话、章节规划 |
| 🎯 专业文档工具 | 完整文档处理流程 | 复杂专业文档需求 | **三模式集成、RAG增强** |

## 🚀 **使用方式**

### **Web界面使用**
```bash
python web_app.py
```
访问 `http://127.0.0.1:5000` 使用Web界面

### **命令行使用**
```bash
python run_agent.py
```

### **专业文档工具使用示例**

#### **模式1：智能自动模式（推荐）**
```python
# 上传Word模板文件，系统自动选择最佳处理模式
user_request = "基于现场复核记录生成安全管理文档"
file_path = "uploads/现场复核记录.doc"
# 系统将自动调用professional_agent模式，包含RAG检索
```

#### **模式2：专业代理模式**
```python
# 明确使用RAG+AI智能处理
processing_mode = "professional_agent"
template_id = "construction_safety"
# 完整的RAG检索+AI合并流程
```

#### **模式3：模板插入模式**
```python
# 保持Word模板结构，智能填充内容
processing_mode = "template_insertion"
# 适用于格式要求严格的模板文档
```

#### **模式4：内容合并模式**
```python
# 基于JSON模板生成新文档
processing_mode = "content_merge"
template_id = "heritage_building"
# 适用于内容重组和标准化
```

## 📋 **技术规格**

### **支持的文档格式**
- **输入格式**: DOC, DOCX, PDF, TXT
- **输出格式**: DOCX, JSON
- **图片处理**: PNG, JPG, PDF

### **AI模型集成**
- **主模型**: DeepSeek-V2.5 (通过OpenRouter)
- **向量化**: Chroma向量数据库
- **RAG检索**: 语义相似度搜索

### **专业领域优化**
- 建筑工程文档
- 安全管理规范
- 古建筑保护方案
- 技术报告标准

## 🛠️ **安装和配置**

### **环境要求**
```bash
pip install -r requirements.txt
```

### **必需配置**
```env
OPENROUTER_API_KEY=your-api-key
RAG_SERVICE_URL=http://43.139.19.144:3000  # 可选
```

### **可选依赖**
- LibreOffice（用于DOC转换）
- 额外的文档处理库

## 📈 **新增功能亮点**

### **🎯 专业文档工具的独特价值**

1. **完整工作流程集成**
   - 一次调用完成：文档分析 → RAG检索 → AI处理 → 格式输出

2. **智能模式选择**
   - 根据文件类型和用户需求自动选择最佳处理策略
   - Word模板自动使用RAG增强的专业代理模式

3. **RAG知识增强**
   - 连接专业向量数据库，获取相关技术资料
   - 上下文信息智能合并，提升文档专业性

4. **三种处理模式无缝切换**
   - 满足不同场景下的文档处理需求
   - 从模板填充到内容重组的全覆盖

5. **建筑工程领域深度优化**
   - 专业术语识别和规范化
   - 行业标准和格式要求自动应用

## 🏆 **使用场景示例**

### **场景1：现场复核记录处理**
```
用户上传：现场复核记录.doc
系统识别：Word模板文档
自动选择：professional_agent模式
处理流程：RAG检索相关规范 → AI智能填充 → 保持原始格式
输出结果：完整的专业复核报告
```

### **场景2：技术方案生成**
```
用户需求：生成古建筑保护技术方案
选择模式：content_merge
模板类型：heritage_building
处理结果：结构化的专业技术文档
```

### **场景3：安全管理文档**
```
输入资料：施工现场照片和基础信息  
处理模式：template_insertion
输出格式：标准化安全管理表格
质量保证：专业术语和格式规范
```

---

**ReactAgent** - 让专业文档处理更智能、更高效、更专业！
